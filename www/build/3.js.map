{"version":3,"sources":["../../src/pages/submitphotos/submitphotos.module.ts","../../src/pages/submitphotos/submitphotos.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SubmitphotosPage } from './submitphotos';\n\n@NgModule({\n  declarations: [\n    SubmitphotosPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SubmitphotosPage),\n  ],\n})\nexport class SubmitphotosPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/submitphotos/submitphotos.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { NativeStorage } from '@ionic-native/native-storage';\r\nimport  {SubmitphotosProvider} from '../../providers/submitphotos/submitphotos';\r\nimport { LoadingController } from 'ionic-angular';\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-submitphotos',\r\n  templateUrl: 'submitphotos.html',\r\n})\r\nexport class SubmitphotosPage {\r\n \r\n  \r\n  constructor(public loadingCtrl: LoadingController,public submitphotos:SubmitphotosProvider, public navCtrl: NavController, public navParams: NavParams,public nativeStorage: NativeStorage) {\r\n  }\r\n  images= [];\r\n  keys=[];\r\n  imagesObj={};\r\n  noOfBedRooms='';\r\n  noOfBathRooms='';\r\n  primaryHeatSource='';\r\n  otherHomeProperties=[];\r\n  token;\r\n  policyNumber;\r\n  zipCode;\r\n  uploadErrorMsg;\r\n  \r\n  ngOnInit() {\r\n  this.nativeStorage.keys().then((keys) => {\r\n      return Promise.all(keys.map(k => \r\n        this.nativeStorage.getItem(k).then(data=>\r\n        { \r\n          if(k=='noOfBedRooms'){\r\n            this.noOfBedRooms=data;\r\n          }\r\n          if(k=='noOfBathRooms'){\r\n            this.noOfBathRooms=data;\r\n          }\r\n          if(k=='primaryHeatSource'){\r\n            this.primaryHeatSource=data;\r\n          }\r\n          if(k=='otherHomeProperties'){\r\n            this.otherHomeProperties=data;\r\n          }\r\n          if(k=='token'){\r\n            this.token=data;\r\n          }\r\n          if(k=='policyNumber'){\r\n            this.policyNumber=data;\r\n          }\r\n          if(k=='zipCode'){\r\n            this.zipCode=data;\r\n          }\r\n        })\r\n      ));\r\n    }), e=>{\r\n      console.log(e);\r\n    }\r\n\r\n     this.nativeStorage.keys().then((keys) => {\r\n      return Promise.all(keys.map(k => \r\n        this.nativeStorage.getItem(k).then(data=>\r\n        {\r\n        if (k.match(/^(noOfBedRooms|noOfBathRooms|primaryHeatSource|otherHomeProperties|zipCode|policyNumber|token|numOfPhotosTobetaken)$/)) {\r\n            // do nothing\r\n        } else {\r\n          // this includes logic needs to be improved added this to avoid IOS default native data \r\n          if(data.includes('data:image/jpeg;base64')) {\r\n            this.imagesObj={\r\n              'key':k,\r\n              'imagedata': data\r\n              }\r\n              this.images.push(this.imagesObj);\r\n          }\r\n          \r\n        }\r\n          })\r\n      ));\r\n    }), e=>{\r\n      console.log(e);\r\n    }\r\n    \r\n  }\r\n  \r\n  \r\n  editPhoto(k){\r\n    this.navCtrl.push('TakeaphotoPage',{'photoId':k,'editPhoto':'Yes'});\r\n    \r\n  }\r\n  \r\n  uploadPhotos(){\r\n    this.uploadErrorMsg='';\r\n    let loading = this.loadingCtrl.create({\r\n      content: 'Uploading photos.....'\r\n    });\r\n  \r\n    loading.present();\r\n    var finalObj={\r\n      \"policyNumber\": this.policyNumber,\r\n      \"zip\": this.zipCode,\r\n      \"dob\": \"08/08/2000\",\r\n      \"homeData\": {\r\n        \"noOfBedRooms\":this.noOfBedRooms,\r\n        \"noOfBathRooms\": this.noOfBathRooms,\r\n       \"primaryHeatSource\":['Boiler'],\r\n       \"otherHomeProperties\":['dog'],\r\n       \"homeImages\": this.images\r\n      }\r\n    };\r\n   console.log(finalObj);\r\n   //submit photo service\r\n   this.submitphotos.submitPhotos(this.token,finalObj).subscribe(\r\n    result => {\r\n      loading.dismiss();\r\n      if (result.error) {\r\n       this.uploadErrorMsg='Error Submiting Images!'; \r\n      } else {\r\n        this.navCtrl.push('ThankyouPage');\r\n        this.nativeStorage.clear();\r\n      }\r\n    },\r\n    (error) => {\r\n      loading.dismiss();\r\n      this.uploadErrorMsg='Error Submiting Images!';\r\n      console.log(\"Error....\" + error);\r\n    }\r\n  );\r\n   \r\n  //\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/submitphotos/submitphotos.ts"],"sourceRoot":""}